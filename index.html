<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>The Case of the Correlation Killer</title>

<style>
body {
    font-family: 'Courier New', monospace;
    background-color: #0a0a0a;
    color: #eee;
    text-align: center;
    padding: 20px;
    overflow-x: hidden;
}

h1 {
    color: crimson;
    text-shadow: 0 0 10px red;
}

.card {
    background: #1c1c1c;
    padding: 20px;
    margin: 20px auto;
    border-radius: 10px;
    max-width: 700px;
    box-shadow: 0 0 20px crimson;
}

button {
    padding: 10px 20px;
    margin: 10px;
    background-color: crimson;
    border: none;
    color: white;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
    transition: 0.2s;
}

button:hover {
    background-color: darkred;
    transform: scale(1.05);
}

.score {
    font-size: 18px;
    margin-top: 10px;
    color: lightgreen;
}

.correct { color: lightgreen; }
.wrong { color: orange; }

#jumpscare {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: none;
    opacity: 0;
    transition: opacity 0.5s ease-in-out;
    z-index: 9999;
}

.shake {
    animation: shake 0.4s;
}

@keyframes shake {
    0% { transform: translate(5px, 5px); }
    25% { transform: translate(-5px, 5px); }
    50% { transform: translate(5px, -5px); }
    75% { transform: translate(-5px, -5px); }
    100% { transform: translate(0px, 0px); }
}
</style>
</head>

<body>

<h1>üïµÔ∏è The Case of the Correlation Killer</h1>

<audio id="bgMusic" loop>
    <source src="scary.mp3" type="audio/mpeg">
</audio>

<audio id="screamSound">
    <source src="scream.mp3" type="audio/mpeg">
</audio>

<img id="jumpscare" src="jumpscare.png">

<div class="card">
    <p id="story">
        A statistics professor collapsed after misinterpreting a scatterplot.
        <br><br>
        Solve the questions. Collect clues. Stop the Correlation Killer.
    </p>

    <div id="questionArea"></div>
    <div id="feedback"></div>
    <div class="score">Clues Collected: <span id="score">0</span>/5</div>
</div>

<script>
let score = 0;
let currentQuestion = 0;

const questions = [
{
    question: "What type of variables are required for a scatterplot?",
    options: [
        "Two categorical",
        "Two quantitative",
        "One categorical & one quantitative",
        "Any variables"
    ],
    answer: 1
},
{
    question: "If X increases while Y decreases, the direction is:",
    options: ["Positive", "Negative", "Curved", "Clustered"],
    answer: 1
},
{
    question: "If points follow a straight line, the form is:",
    options: ["Curved", "Linear", "Weak", "Random"],
    answer: 1
},
{
    question: "Correlation r must be between:",
    options: ["0 to 1", "-1 to 1", "-10 to 10", "No limits"],
    answer: 1
},
{
    question: "Correlation does NOT imply:",
    options: ["Association", "Causation", "Direction", "Strength"],
    answer: 1
}
];

document.body.addEventListener("click", function() {
    document.getElementById("bgMusic").play();
}, { once: true });

function triggerJumpScare(intense=false) {
    let scare = document.getElementById("jumpscare");
    let scream = document.getElementById("screamSound");

    scare.style.display = "block";
    scare.style.opacity = "1";

    scream.volume = intense ? 1.0 : 0.6;
    scream.play();

    document.body.classList.add("shake");

    // Stay visible for 2.5 seconds
    setTimeout(() => {
        scare.style.opacity = "0";

        setTimeout(() => {
            scare.style.display = "none";
            document.body.classList.remove("shake");
        }, 500);

    }, 2500);
}

function checkAnswer(selected) {
    let correct = questions[currentQuestion].answer;

    if (selected === correct) {
        score++;
        document.getElementById("feedback").innerHTML =
            "<p class='correct'>Correct. You found a clue...</p>";
        triggerJumpScare(false);
    } else {
        document.getElementById("feedback").innerHTML =
            "<p class='wrong'>WRONG. The killer feeds on weak statistical reasoning.</p>";
        triggerJumpScare(true);
    }

    document.getElementById("score").innerText = score;
    currentQuestion++;

    setTimeout(loadQuestion, 1800);
}

function loadQuestion() {
    if (currentQuestion >= questions.length) {
        endGame();
        return;
    }

    let q = questions[currentQuestion];
    let html = "<h2>Question " + (currentQuestion + 1) + "</h2>";
    html += "<p>" + q.question + "</p>";

    q.options.forEach((option, index) => {
        html += `<button onclick="checkAnswer(${index})">${option}</button><br>`;
    });

    document.getElementById("questionArea").innerHTML = html;
    document.getElementById("feedback").innerHTML = "";
}

function endGame() {
    let ending = "";

    if (score >= 4) {
        ending = `
        <h2>üéâ Case Solved!</h2>
        <p>You exposed the real culprit: CONFUSING CORRELATION WITH CAUSATION.</p>
        <p>The professor survives. Statistics is saved.</p>
        `;
    } else {
        ending = `
        <h2>üíÄ The Killer Escapes...</h2>
        <p>Weak interpretation of scatterplots has consequences.</p>
        <p>The Correlation Killer remains at large.</p>
        `;
    }

    document.getElementById("questionArea").innerHTML = ending;
}

loadQuestion();
</script>

</body>
</html>
